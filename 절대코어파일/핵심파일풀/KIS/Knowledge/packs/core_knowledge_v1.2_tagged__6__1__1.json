{
  "meta": {
    "version": "1.2.0",
    "release_date": "2025-01-15T00:00:00Z",
    "last_updated": "2025-01-15T10:30:00Z",
    "schema_version": "2.0",
    "git_hash": "a7f3c2d8e9b1f4a2c3d5e6f7g8h9i0j1",
    "data_integrity": {
      "rules_hash": "sha256:3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a",
      "catalog_hash": "sha256:9i0j1k2l3m4n5o6p7q8r9s0t1u2v3w4x",
      "symbols_hash": "sha256:5y6z7a8b9c0d1e2f3g4h5i6j7k8l9m0n"
    },
    "change_log": {
      "v1.0_to_v1.2": {
        "bundle_rules": {
          "added": ["BND_SPD_COMPANION", "BND_METER_COMPANION"],
          "modified": ["BND_MAGNET_BASE", "BND_TIMER_EFFECT"],
          "schema_changes": ["SOT format compatibility", "labor_add_per_item_won standardization"]
        },
        "catalog_enhancements": {
          "accessories_added": 7,
          "drawing_symbols_mapped": 5,
          "price_updates": 12
        },
        "impact_assessment": {
          "cost_variance_range": "±5-15%",
          "bundle_coverage_improvement": "85% → 95%",
          "performance_impact": "negligible (<1ms per rule)"
        }
      }
    },
    "validation": {
      "schema_valid": true,
      "rule_count": 4,
      "catalog_items": 7,
      "symbol_mappings": 5,
      "last_validated": "2025-01-15T10:30:00Z"
    }
  },
  "rules": {
    "bundles": [
      {
        "id": "BND_MAGNET_BASE",
        "if_item_category": "magnet_contactor",
        "then_add": [
          {"item_id": "FUSE_HOLDER", "qty_per": 1},
          {"item_id": "TERMINAL_BLOCK_600V", "qty_per": 3},
          {"item_id": "DUCT_PVC_40", "qty_per": 2},
          {"item_id": "CABLE_WIRE", "qty_per": 2}
        ],
        "labor_add_per_item_won": 20000,
        "description": "Magnet contactor base bundle - 마그네트 컨택터 동반 자재 세트",
        "version": "1.2.0",
        "last_modified": "2025-01-15T10:00:00Z",
        "validation": {
          "tested_scenarios": ["MC_50A", "MC_100A", "MC_200A"],
          "cost_impact_range": "15000-25000 KRW per unit"
        }
      },
      {
        "id": "BND_TIMER_EFFECT",
        "if_item_category": "timer",
        "then_add": [
          {"item_id": "RELAY_AUX", "qty_per": 2},
          {"item_id": "LED_INDICATOR", "qty_per": 1}
        ],
        "labor_add_per_item_won": 15000,
        "description": "Timer effect bundle - 타이머 동반 자재 세트",
        "version": "1.2.0",
        "last_modified": "2025-01-15T10:00:00Z",
        "category_variants": ["timer", "timer_24h", "sunset_timer"],
        "validation": {
          "tested_scenarios": ["TIMER_24H", "SUNSET_TIMER", "WEEKLY_TIMER"],
          "cost_impact_range": "18500-21000 KRW per unit"
        }
      },
      {
        "id": "BND_SPD_COMPANION",
        "if_item_category": "surge_protector",
        "then_add": [
          {"item_id": "TERMINAL_BLOCK_600V", "qty_per": 2},
          {"item_id": "DUCT_PVC_40", "qty_per": 1}
        ],
        "labor_add_per_item_won": 10000,
        "description": "SPD companion materials - SPD 동반 자재 세트",
        "version": "1.2.0",
        "added_in": "1.2.0",
        "code_matching": ["SPD"],
        "validation": {
          "tested_scenarios": ["SPD_CLASS2_40KA", "SPD_CLASS1_20KA"],
          "cost_impact_range": "16000-18000 KRW per unit"
        }
      },
      {
        "id": "BND_METER_COMPANION",
        "if_item_category": "meter",
        "then_add": [
          {"item_id": "METER_CT", "qty_per": 3},
          {"item_id": "TERMINAL_BLOCK_600V", "qty_per": 6}
        ],
        "labor_add_per_item_won": 25000,
        "description": "Meter companion materials - 계량기 동반 자재 세트",
        "version": "1.2.0",
        "added_in": "1.2.0",
        "code_matching": ["METER"],
        "validation": {
          "tested_scenarios": ["METER_3P4W_100A", "METER_1P2W_60A"],
          "cost_impact_range": "68000-75000 KRW per unit"
        }
      }
    ],
    "validation": {
      "total_rules": 4,
      "rules_with_labor": 4,
      "average_bundle_items": 3.25,
      "cost_range_total": "15000-75000 KRW per trigger"
    }
  },
  "catalog": {
    "accessories": {
      "items": [
        {
          "id": "FUSE_HOLDER",
          "name": "퓨즈홀더",
          "price": 5000,
          "category": "fuse",
          "unit": "EA",
          "specifications": {
            "voltage": "600V",
            "current": "30A",
            "type": "cartridge"
          },
          "notes": ["drawing_symbol:FH", "magnet_bundle_standard"]
        },
        {
          "id": "TERMINAL_BLOCK_600V",
          "name": "터미널블록 600V",
          "price": 3000,
          "category": "terminal",
          "unit": "EA",
          "specifications": {
            "voltage": "600V",
            "current": "10A",
            "connection": "screw"
          },
          "notes": ["drawing_symbol:TB", "universal_accessory"]
        },
        {
          "id": "DUCT_PVC_40",
          "name": "PVC 덕트 40mm",
          "price": 2000,
          "category": "duct",
          "unit": "M",
          "specifications": {
            "material": "PVC",
            "width": "40mm",
            "color": "gray"
          },
          "notes": ["drawing_symbol:DT", "cable_management"]
        },
        {
          "id": "CABLE_WIRE",
          "name": "전선 케이블",
          "price": 1500,
          "category": "cable",
          "unit": "M",
          "specifications": {
            "conductor": "copper",
            "insulation": "PVC",
            "size": "2.5sq"
          },
          "notes": ["drawing_symbol:CW", "connection_wire"]
        },
        {
          "id": "RELAY_AUX",
          "name": "보조 릴레이",
          "price": 8000,
          "category": "relay",
          "unit": "EA",
          "specifications": {
            "coil_voltage": "24VDC",
            "contact": "1NO+1NC",
            "current": "5A"
          },
          "notes": ["drawing_symbol:RY", "timer_accessory"]
        },
        {
          "id": "LED_INDICATOR",
          "name": "LED 표시등",
          "price": 2500,
          "category": "indicator",
          "unit": "EA",
          "specifications": {
            "voltage": "24VDC",
            "color": "red",
            "type": "pilot_lamp"
          },
          "notes": ["drawing_symbol:LD", "status_indicator"]
        },
        {
          "id": "METER_CT",
          "name": "계량기용 CT",
          "price": 15000,
          "category": "meter",
          "unit": "EA",
          "specifications": {
            "ratio": "100/5A",
            "class": "0.5S",
            "burden": "5VA"
          },
          "notes": ["drawing_symbol:CT", "meter_accessory"]
        }
      ],
      "validation": {
        "total_items": 7,
        "price_range": "1500-15000 KRW",
        "categories": 7,
        "all_have_symbols": true
      }
    },
    "drawing_symbols": {
      "FH": {"item_id": "FUSE_HOLDER", "category": "fuse"},
      "TB": {"item_id": "TERMINAL_BLOCK_600V", "category": "terminal"},
      "DT": {"item_id": "DUCT_PVC_40", "category": "duct"},
      "CW": {"item_id": "CABLE_WIRE", "category": "cable"},
      "RY": {"item_id": "RELAY_AUX", "category": "relay"},
      "LD": {"item_id": "LED_INDICATOR", "category": "indicator"},
      "CT": {"item_id": "METER_CT", "category": "meter"}
    }
  },
  "compatibility": {
    "legacy_support": {
      "v1.0_format": true,
      "migration_notes": "Automatic conversion from legacy 'rules' array to 'rules.bundles' structure",
      "deprecated_fields": ["old_rule_format"],
      "breaking_changes": []
    },
    "api_versions": ["2.7", "2.8"],
    "schema_evolution": {
      "next_version": "1.3.0",
      "planned_features": ["dynamic_pricing", "supplier_integration", "alternative_parts"]
    }
  },
  "pipeline_guards": {
    "data_integrity_checks": [
      "rule_id_uniqueness",
      "item_id_existence_in_catalog", 
      "price_validation",
      "category_consistency"
    ],
    "performance_benchmarks": {
      "rule_application": "<1ms per rule",
      "catalog_lookup": "<0.1ms per item",
      "validation": "<5ms total"
    },
    "regression_gates": {
      "cost_variance_threshold": "±10%",
      "bundle_count_stability": true,
      "whytrace_completeness": "100%"
    }
  }
}